<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vindow Viper</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 100%;
            margin: 0 auto;
            padding: 0;
        }
        #headerSection {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 250px;
            background-color: white;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;             
        }
        #tallyCounter, .controlsContainer, #mainContent, .imageContainer, 
        .mediaWrapper, .reviewSection, .reactionButtons {
            box-sizing: border-box;
        }
        #tallyCounter {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .controlsContainer {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        #fileInput, #downloadCsv, .ratioButton, #safeZonesButton, #reviewToggleButton {
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            margin: 0;
        }
        #fileInput {
            padding: 10px;
        }
        .buttonGroup {
            display: flex;
            gap: 10px;
        }
        .ratioButton {
            background-color: #f0f0f0;
        }
        .ratioButton.active {
            background-color: #4CAF50;
            color: white;
        }
        #safeZonesButton {
            background-color: #f0f0f0;
        }
        #safeZonesButton.active {
            background-color: #FF8C00;
            color: white;
        }
        #reviewToggleButton {
            background-color: #f0f0f0;
        }
        #reviewToggleButton.active {
            background-color: #2196F3;
            color: white;
        }
        #mainContent {
            margin-top: 220px;
            padding: 20px;
        }
        #imageArea {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
        }
        .imageContainer {
            flex-grow: 1;
            flex-basis: 200px;
            margin: 10px;
            padding-top: 50px;
            text-align: center;
        }
        .mediaWrapper {
            position: relative;
            width: 100%;
            margin-bottom: 10px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: padding-top 0.3s ease;
        }
        .mediaWrapper.ratio-9-16 {
            padding-top: 177.78%;
        }
        .mediaWrapper.ratio-4-5 {
            padding-top: 125%;
        }
        .mediaWrapper.ratio-1-1 {
            padding-top: 100%;
        }
        .mediaWrapper.ratio-16-9 {
            padding-top: 56.25%;
        }
        .mediaWrapper img, .mediaWrapper video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .mediaWrapper video {
            background: #000;
        }
        .videoControls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 2;
        }
        .videoControls button {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2em;
            padding: 5px 10px;
        }
        .originalRatio {
            color: white;
            font-size: 0.9em;
            padding: 0 10px;
        }
        .safeZonesOverlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }
        .safeZonesOverlay.visible {
            opacity: 1;
        }
        .mediaError {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #666;
            font-weight: bold;
        }
        .imageHeader {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 5px;
        }
        .countryFlag {
            font-size: 1.5em;
        }
        .imageNumber {
            font-weight: bold;
        }
        .imageCategory {
            color: #666;
            margin-bottom: 10px;
            font-style: italic;
        }
        .reviewSection {
            transition: opacity 0.3s ease, height 0.3s ease;
            overflow: hidden;
        }
        .reviewSection.hidden {
            opacity: 0;
            height: 0;
            margin: 0;
            padding: 0;
        }
        .reactionButtons {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .thumbsButtons {
            display: flex;
            gap: 10px;
            margin: 0;
        }
        .dropdown {
            margin-top: 10px;
            width: 100%;
        }
        .dropdown select {
            width: 100%;
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        .seasonSelect {
            padding: 5px 10px;
            font-size: 1em;
            border-radius: 4px;
            border: 1px solid #ccc;
            background-color: white;
            cursor: pointer;
            margin-bottom: 10px;
            width: 100%;
        }
        .seasonSelect option {
            padding: 5px;
        }
        .reactionButtons button {
            margin: 0 5px;
            padding: 5px 10px;
            cursor: pointer;
            border: none;
            background-color: #f0f0f0;
            transition: background-color 0.3s;
            font-size: 1.2em;
        }
        .reactionButtons button.selected {
            color: white;
        }
        .reactionButtons button.thumbsUp.selected {
            background-color: green;
        }
        .reactionButtons button.thumbsDown.selected {
            background-color: red;
        }
        .commentSection {
            margin-top: 10px;
            width: 100%;
        }
        .commentSection textarea {
            width: 100%;
            padding: 5px;
            margin-top: 5px;
            resize: vertical;
            min-height: 60px;
            font-family: Arial, sans-serif;
        }
        .mediaType {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8em;
            z-index: 2;
        }
        .mediaLinksContainer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        .linksArea {
            display: flex;
            gap: 10px;
        }
        .mediaLinksContainer a {
            text-decoration: none;
            padding: 5px 10px;
            background-color: #f0f0f0;
            color: #333;
            border-radius: 4px;
            font-size: 0.9em;
            transition: background-color 0.3s;
        }
        .mediaLinksContainer a:hover {
            background-color: #e0e0e0;
        }
        .mediaLinksContainer .thumbsButtons button {
            padding: 5px 10px;
            cursor: pointer;
            border: none;
            background-color: #f0f0f0;
            border-radius: 4px;
            font-size: 1.2em;
            transition: background-color 0.3s;
        }
        .mediaLinksContainer .thumbsButtons button.selected {
            color: white;
        }
        .mediaLinksContainer .thumbsButtons button.thumbsUp.selected {
            background-color: green;
        }
        .mediaLinksContainer .thumbsButtons button.thumbsDown.selected {
            background-color: red;
        }
        .titleLogo {
            width: 128px;
            height: 96px;
            margin-right: 20px;
            vertical-align: middle;
        }
        #headerSection h1 {
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body>
    <div id="headerSection">
        <h1><img src="https://static.wikia.nocookie.net/animaniacs/images/1/1f/The_Viper_silhouette.jpg/revision/latest?cb=20220810225021" alt="Vindow_Viper" class="titleLogo">Vindow Viper</h1>
        
        <div id="tallyCounter">
            <div class="tallyItem">
                <span class="tallyEmoji">üëç</span>
                <span class="tallyCount" id="thumbsUpCount">0</span>
            </div>
            <div class="tallyItem">
                <span class="tallyEmoji">üëé</span>
                <span class="tallyCount" id="thumbsDownCount">0</span>
            </div>
        </div>
        
        <div id="inputArea">
            <div class="controlsContainer">
                <input type="file" id="fileInput" accept=".csv">
                <button id="downloadCsv">Download CSV</button>
                <div class="buttonGroup">
                    <button class="ratioButton active" data-ratio="9:16">9:16</button>
                    <button class="ratioButton" data-ratio="4:5">4:5</button>
                    <button class="ratioButton" data-ratio="1:1">1:1</button>
                    <button class="ratioButton" data-ratio="16:9">16:9</button>
                </div>
                <button id="safeZonesButton">Safe zones</button>
                <button id="reviewToggleButton">Review</button>
            </div>
        </div>
    </div>

    <div id="mainContent">
        <div id="imageArea"></div>
    </div>

    <script>
        let imageCount = 0;
        let imageReactions = {};
        let currentAspectRatio = '9:16';
        let safeZonesVisible = false;
        let reviewSectionVisible = true;
        let thumbsUpCount = 0;
        let thumbsDownCount = 0;

        const seasonMapping = {
            'Select season': '',  // Default option
            'Spring': 'üå∏ Spring',
            'Summer': '‚òÄÔ∏è Summer',
            'Fall': 'üçÅ Fall',
            'Winter': '‚ùÑÔ∏è Winter'
        };

        const countryFlags = {
            'UK': 'üá¨üáß',
            'IT': 'üáÆüáπ',
            'FR': 'üá´üá∑',
            'DE': 'üá©üá™',
            'ES': 'üá™üá∏'
        };

        const dropdownOptions = [
            "Rejection Reason",
            "Ratio Fit",
            "ASIN Inventory",
            "Original Image",
            "Price Message",
            "MINOR Present",
            "Text Overlay",
            "ASINs in Order??",
            "Explicit Nudity",
            "Partial Nudity",
            "Sexual Situations",
            "Violence",
            "Visually Disturbing",
            "Rude Gestures",
            "Drugs",
            "Tobacco",
            "Vaping",
            "Alcohol",
            "Gambling",
            "Hate Speech / Symbols",
            "Guns",
            "Profanity",
            "Lingerie / Swimwear"
        ];

        const secondDropdownOptions = [
            "Interest Category",
            "APB | Amazon Private Brands",
            "Beauty | Beauty",
            "Beauty | Makeup",
            "Beauty | Nails",
            "Beauty | Skin Care",
            "Fashion | Men's Style",
            "Fashion | Wedding",
            "Fashion | Women's style",
            "Hardlines | Coffee Making",
            "Hardlines | Electronics",
            "Hardlines | Gaming",
            "Hardlines | Garden & Outdoor",
            "Hardlines | Home Interior",
            "Hardlines | Indoor Plants",
            "Hardlines | Licensing (HL) Star Wars",
            "Hardlines | Storage and Organization",
            "Hardlines | Work From Home",
            "Pets | Cats",
            "Pets | Dogs",
            "Pets | Pets",
            "X-PF | Fitness, Running, Hiking",
            "X-PF | Healthy Lifestyle",
            "X-PF | Hiking",
            "X-PF | Kitchen & Cooking",
            "X-PF | Parenting",
            "X-PF | Running",
            "X-PF | Travel, Camping"
        ];

        const imageTypeOptions = [
            "Image Type",
            "Lifestyle",
            "Flat Lay",
            "Collage",
            "Product Image"
        ];
        function updateTallyCounters() {
            let upCount = 0;
            let downCount = 0;
            
            Object.values(imageReactions).forEach(reaction => {
                if (reaction.reaction === 'thumbs up') upCount++;
                if (reaction.reaction === 'thumbs down') downCount++;
            });
            
            document.getElementById('thumbsUpCount').textContent = upCount;
            document.getElementById('thumbsDownCount').textContent = downCount;
            
            thumbsUpCount = upCount;
            thumbsDownCount = downCount;
        }

        function generateCustomFilename(aci, country, mediaUrl) {
